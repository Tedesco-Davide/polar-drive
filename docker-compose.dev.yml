# docker-compose.dev.yml
# Configurazione SVILUPPO con SQL Server locale

services:
  api:
    container_name: polardrive-api-dev
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ConnectionStrings__DefaultConnection=${CONNECTION_STRING}
      - TeslaApi__BaseUrl=http://mock-api:9090
      - TeslaApi__ClientId=${TESLA_CLIENT_ID}
      - TeslaApi__ClientSecret=${TESLA_CLIENT_SECRET}
      - Jwt__SecretKey=${JWT_SECRET_KEY}
      - Jwt__Issuer=${JWT_ISSUER}
      - Jwt__Audience=${JWT_AUDIENCE}
      - Jwt__ExpirationMinutes=${JWT_EXPIRATION_MINUTES}
      - Twilio__AccountSid=${TWILIO_ACCOUNT_SID}
      - Twilio__AuthToken=${TWILIO_AUTH_TOKEN}
      - Twilio__PhoneNumber=${TWILIO_PHONE_NUMBER}
    ports:
      - "8080:8080"
    extra_hosts:
      - "host.docker.internal:host-gateway"

  mock-api:
    container_name: polardrive-mock-api-dev
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - WebAPI__BaseUrl=http://api:8080
    ports:
      - "9090:9090"

  frontend:
    container_name: polardrive-frontend-dev
    environment:
      - NODE_ENV=development
      - NEXT_PUBLIC_API_BASE=${NEXT_PUBLIC_API_BASE}
    ports:
      - "3000:3000"

networks:
  polardrive-network:
    name: polardrive-network-dev